
/**
 * The code below uses open source software. Please visit the URL below for an overview of the licenses:
 * http://js.api.here.com/v3/3.1.61.3/HERE_NOTICE
 */

H.util.eval("Xe.prototype.Ae=da(1,function(a,b){this.root.Ae(a,jb(b)?b:this.Ph)});af.prototype.Ae=da(0,function(a,b){var c=0,d;if(!a(this)&&b--)for(;3>=c;c++)(d=this[c])&&d.Ae(a,b)});t(\"H.clustering.DataPoint\",function(a,b,c,d){this.lat=a;this.lng=b;this.wt=c===+c?c:1;this.data=d});function fs(a,b){this.ir=a;this.ee=b}t(\"H.clustering.grid.NoisePoint\",fs);fs.prototype.ya=function(){return Oe(this.ir)};fs.prototype.getPosition=fs.prototype.ya;fs.prototype.Xd=function(){return this.ir.wt};fs.prototype.getWeight=fs.prototype.Xd;fs.prototype.Zf=qe;fs.prototype.isCluster=fs.prototype.Zf;fs.prototype.Td=function(){return this.ee};fs.prototype.getMinZoom=fs.prototype.Td;fs.prototype.getData=function(){return this.ir.data};fs.prototype.getData=fs.prototype.getData;function gs(a){nc.call(this);this.fc=[];var b;a?Qa(b={},hs,a):b=hs;this.options=b;nc.call(this)}u(gs,nc);var is={clusters:[],noisePoints:[]},hs={projection:Ci,min:0,max:22,eps:32,minWeight:2};m=gs.prototype;m.ve=function(a){this.fc=a;this.qd=!0};m.zc=function(a){this.fc.push(a);this.qd=!0};m.Al=function(a){this.fc=this.fc.concat(a);this.qd=!0};m.Dk=function(a){this.fc=this.fc.filter(function(b){return b!==a});this.qd=!0};m.disposeInternal=function(){gs.g.disposeInternal.call(this);delete this.fc};\ngs.prototype.disposeInternal=gs.prototype.disposeInternal;gs.prototype.Vw=re;function js(a,b,c){this.Jq=this.ee=c;this.jr=[];this.us=0;this.J=Te(a,b,!0)}t(\"H.clustering.grid.Cluster\",js);js.prototype.Pi=function(a){this.Uc||(this.Uc=Oe(a));this.us+=a.wt||1;this.jr.push(a)};js.prototype.ya=function(){return this.Uc};js.prototype.getPosition=js.prototype.ya;js.prototype.Xd=function(){return this.us};js.prototype.getWeight=js.prototype.Xd;js.prototype.Zf=pe;js.prototype.isCluster=js.prototype.Zf;js.prototype.Td=function(){return this.ee};js.prototype.getMinZoom=js.prototype.Td;\njs.prototype.om=function(){return this.Jq};js.prototype.getMaxZoom=js.prototype.om;js.prototype.C=function(){return this.J};js.prototype.getBoundingBox=js.prototype.C;js.prototype.vp=function(a){this.zj(a)};js.prototype.forEachEntry=js.prototype.vp;js.prototype.zj=function(a){var b=this;if(!Za(a))throw new C(this.zj,0,a);this.jr.forEach(function(c){a(new fs(c,b.ee+1))})};js.prototype.forEachDataPoint=js.prototype.zj;function ks(a){gs.call(this,a)}u(ks,gs);\nks.prototype.es=function(a){var b=this.options,c=b.min,d=b.max,e=[],f=[],g;if(this.qd){for(g=this.fc;c<=d;c++){for(var h,k=void 0,l,n,p,q,r,v,w,y=c,D=g,G=e,O=f,R=b.eps,Ta=b.projection,aa=b.minWeight,ub=D.length,Ba=Math.pow(2,y+8),Oa=[];w=D[--ub];)if(!w.Bs){n=Ta.Se(w).scale(Ba).floor();v=Ba;r=n.x;q=n.y;for(l=Oa.length;l--;)h=Oa[l],p=h.ya(),h.zs||(h.zs=Ta.Se(p).scale(Ba).floor()),p=h.zs,p=p.kb(n),p<v&&(v=p,k=h);k&&k.C().Gf(w)||(k=new js(Ta.wn({x:(r-R)/Ba,y:(q-R)/Ba}),Ta.wn({x:(r+R)/Ba,y:(q+R)/Ba}),\ny),Oa.push(k));k.Pi(w);k=null}for(ub=Oa.length;ub--;)if(h=Oa[ub],l=h.Xd(),l<aa)for(h=h.jr,l=h.length;w=h[--l];)O.push(new fs(w,y)),w.Bs=!0;else G.push(h)}c=0;for(d=g.length;c<d;c++)delete g[c].Bs;this.qd=!1;a({clusters:e,noisePoints:f})}};function ls(a){gs.call(this,a);a=this.options;if(a.projection!==Ci)throw new C(ls,0,\"Other projection than mercator not supported yet\");this.me=a.projection;this.lp=a.eps;this.PB=a.minWeight;this.kw=new Di(this.me);(new dj).registerProcessor(\"cluster\",\"H.clustering.dynamicgrid.worker\");this.hg=z(this.hg,this);this.Pq=z(this.Pq,this)}u(ls,gs);ls.prototype.Vw=function(a,b){this.Qy=a;this.Ry=Bb(b)};\nls.prototype.es=function(a,b){var c=this.Lg;var d=this.Qy,e=this.Ry||0;var f=!c||!(c.zoom===e&&c.Si.da(d));if(d&&(this.qd||f)){c&&3>c.state&&c.cancel();this.qd=!1;c=this.lp;if(c>=128*Gb(2,e))var g=ms;else{f=this.kw;f.Va(e);var h=f.Gb(d.Oc());g=f.Gb(d.Mc());h.y-=c;g.y+=c;h=f.sk(h);var k=f.sk(g);g=new K(h.lat,h.lng,k.lat,k.lng);c=f.Za(c,0).lng+180;g=g.de(h.lat,h.lng-c,k.lat,h.lng).de(h.lat,k.lng,k.lat,k.lng+c)}c=g;h=this.fc;g=[];for(f=h.length;f--;)c.Gf(h[f])&&g.push(h[f]);0<g.length?(this.Lg=new ns(d,\ne,g,this.lp,this.PB,this.me!==Ci,a,b),this.Lg.then(this.hg,this.Pq)):a(is)}};\nls.prototype.hg=function(a){Ca(a)||(a=new globalThis.Uint32Array(a));for(var b=this.Lg,c=b.mC,d=0,e=a[d++],f=Array(e),g=0,h=[],k=a.length,l=this.Lg.Ty,n=this.Lg.zoom;e--;)f[g++]=new fs(l[a[d++]],n);for(;d<k;){e=a[d++];g=l[a[d]];var p=this.kw;var q=this.lp;p.Va(this.Lg.zoom);var r=p.Gb(g);g=p.Za(r.x-q,r.y-q);p=p.Za(r.x+q,r.y+q);g=new K(g.lat,g.lng,p.lat,p.lng);for(g=new js(g.Oc(),g.Mc(),n);e--;)g.Pi(l[a[d++]]);h.push(g)}c.call(b,{clusters:h,noisePoints:f})};ls.prototype.Pq=function(a){gb(a)&&this.Lg.cC(a)};\nvar ms=new K(90,-180,-90,180);ls.prototype.disposeInternal=function(){ls.g.disposeInternal.call(this)};ls.prototype.disposeInternal=ls.prototype.disposeInternal;function ns(a,b,c,d,e,f,g,h){this.Si=a;this.zoom=b;this.Ty=c;this.mC=g;this.cC=h;a=c.length;g=3*a;h=new (globalThis.Float64Array||Array)(g);for(var k;a--;)k=c[a],h[--g]=k.lat,h[--g]=k.lng,h[--g]=k.wt;Wd.call(this,\"cluster\",{message:[h,d,e,b,f]},void 0)}u(ns,fj);function os(a,b,c){this.qa=a;this.dm=b;this.ee=c}t(\"H.clustering.fastgrid.NoisePoint\",os);os.prototype.ya=function(){this.Uc||(this.Uc=this.qa.Za(this.dm[1],this.dm[0],1));return this.Uc};os.prototype.getPosition=os.prototype.ya;os.prototype.Xd=function(){return this.dm.weight};os.prototype.getWeight=os.prototype.Xd;os.prototype.Zf=qe;os.prototype.isCluster=os.prototype.Zf;os.prototype.Td=function(){return this.ee-this.qa.hh};os.prototype.getMinZoom=os.prototype.Td;os.prototype.getData=function(){return this.dm.data};\nos.prototype.getData=os.prototype.getData;function ps(a,b,c,d){this.qa=a;this.uc=b;this.ee=c;this.Jq=d;this.wp=Ia(this.wp,this);this.up=Ia(this.up,this)}t(\"H.clustering.fastgrid.Cluster\",ps);ps.prototype.ya=function(){this.Uc||(this.Uc=this.qa.Za(this.uc.dj,this.uc.ej,this.uc.Gc));return this.Uc};ps.prototype.getPosition=ps.prototype.ya;ps.prototype.Xd=function(){return this.uc.Gc};ps.prototype.getWeight=ps.prototype.Xd;ps.prototype.Zf=pe;ps.prototype.isCluster=ps.prototype.Zf;\nps.prototype.Td=function(){return this.ee?this.ee-this.qa.hh:-1/0};ps.prototype.getMinZoom=ps.prototype.Td;ps.prototype.om=function(){return this.Jq-this.qa.hh};ps.prototype.getMaxZoom=ps.prototype.om;ps.prototype.C=function(){this.J||(this.J=Te(this.qa.Za(this.uc.dh,this.uc.cj,1),this.qa.Za(this.uc.aj,this.uc.bj,1),!0));return this.J};ps.prototype.getBoundingBox=ps.prototype.C;ps.prototype.vp=function(a){this.$t=a;this.uc.Ae(this.wp,Wb)};ps.prototype.forEachEntry=ps.prototype.vp;\nps.prototype.wp=function(a,b){var c=!1,d,e;a.Gc>=this.qa.Cv&&a!==this.uc&&a.Gc!==this.uc.Gc&&(this.$t(new ps(this.qa,a,0,b)),c=!0);if(!c&&(d=a.entries))for(a=d.length,e=0;e<a;e++)this.$t(new os(this.qa,d[e],b));return c};ps.prototype.zj=function(a){this.pz=a;this.uc.Ae(this.up,Wb)};ps.prototype.forEachDataPoint=ps.prototype.zj;ps.prototype.up=function(a,b){var c;if(a=a.entries){var d=a.length;for(c=0;c<d;c++)this.pz(new os(this.qa,a[c],b))}return!1};function qs(a,b,c,d,e,f){this.Co=b;a&&(this.parent=a,b&1?(c=a[8],e=a[5]):(c=a[7],e=a[8]),b&2?(d=a[9],f=a[6]):(d=a[4],f=a[9]));this[7]=c;this[5]=e;this[8]=(c+e)/2;this[4]=d;this[6]=f;this[9]=(d+f)/2}m=qs.prototype;m.hb=0;m.th=function(a){return this[a]||(++this.hb,this[a]=new qs(this,a))};m.removeChild=function(a){var b=a.Co;this[b]===a&&(delete this[b],delete a.parent,--this.hb)};m.Ae=function(a,b){for(var c=0,d=this;d=d.parent;)++c;rs(this,a,b,c)};\nfunction rs(a,b,c,d){var e,f;if(!b(a,d)&&c--)for(++d,e=0;4>e;e++)(f=a[e])&&rs(f,b,c,d)}m.Qg=function(a){(this.entries||(this.entries=[])).push(a)};m.dj=0;m.ej=0;m.Gc=0;function ss(a){this.Ph=a||10;this.Ck=this.Bk=this.Zi=this.Yi=2147483648;this.Em()}m=ss.prototype;m.Em=function(){this.head=this.root=new qs(null,NaN,this.Yi-this.Bk,this.Zi-this.Ck,this.Yi+this.Bk,this.Zi+this.Ck)};m.Ll=function(){ts(this,this.root);this.Em()};function ts(a,b){var c,d;for(c=0;4>c;c++)if(d=b[c])ts(a,d),delete b[c];delete b.parent;delete b.entries}\nm.ld=function(a){var b=this.head,c;if(a){var d=a;if(d!==b)for(b=d;d=d.parent;)if(d.entries||1<d.hb)b=d}else for(;!b.entries&&2>(c=b.hb);)if(c)b=d;else break;this.head=b};m.Zd=function(a,b,c,d){var e=this.root;if(!(a>=e[7]&&b>=e[4]&&a<=e[5]&&b<=e[6]))throw Error(\"Coordinates out of bounds\");return this.Vb(this.root,a,b,c,this.Ph,d)};\nm.Vb=function(a,b,c,d,e,f){var g=a.entries;e?a.hb?g=this.Sj(a,b,c,d,e,f):g?(g=g[0],g=a.th(+(g[1]>=a[8])|+(g[0]>=a[9])<<1),g.entries=a.entries,g.dj=a.dj,g.ej=a.ej,g.Gc=a.Gc,g.dh=a.dh,g.cj=a.cj,g.aj=a.aj,g.bj=a.bj,delete a.entries,this.ld(g),g=this.Sj(a,b,c,d,e,f)):(a.Qg(g=new us(b,c,d,f)),this.ld(a)):(g||this.ld(a),a.Qg(g=new us(b,c,d,f)));a.dj+=b*d;a.ej+=c*d;a.Gc+=d;a.dh===A?(a.dh=a.aj=b,a.cj=a.bj=c):(b<a.dh?a.dh=b:b>a.aj&&(a.aj=b),c<a.cj?a.cj=c:c>a.bj&&(a.bj=c));return g};\nm.Sj=function(a,b,c,d,e,f){return this.Vb(a.th(+(b>=a[8])|+(c>=a[9])<<1),b,c,d,e-1,f)};m.Ae=function(a,b){rs(this.root,a,b===+b?b:this.Ph,0)};function us(a,b,c,d){this[0]=b;this[1]=a;this.weight=c;this.data=d};function vs(a){gs.call(this,a);a=this.options;this.me=a.projection;this.hk=a.min;this.fg=a.max;this.Cv=a.minWeight;this.hh=7-Ab(Eb(zb(1,a.eps))/Ob);this.vr=new ss(zb(this.hk,this.fg+this.hh))}u(vs,gs);m=vs.prototype;m.ve=function(a){var b=0,c=a.length,d,e=new M(0,0),f=this.me,g=this.vr;vs.g.ve.call(this,a);for(g.Ll();b<c;b++)f.Se(d=a[b],e).scale(4294967296).floor(),g.Zd(e.x,e.y,d.wt,d.data);this.qd=!0};m.zc=function(a){vs.g.zc.call(this,a);this.ve(this.fc)};\nm.Al=function(a){for(var b=a.length,c=vs.g.zc;b--;)c.call(this,a[b]);this.ve(this.fc)};m.Dk=function(a){vs.g.Dk.call(this,a);this.ve(this.fc)};m.Za=function(a,b,c,d){return this.me.Za(a/c/4294967296,b/c/4294967296,d)};m.es=function(a){if(this.qd){var b={clusters:[],noisePoints:[]};ws(this,this.vr.root,0,this.fg+this.hh,-1/0,b,null);this.qd=!1;a(b)}};\nfunction ws(a,b,c,d,e,f,g){var h=b.Gc,k;g&&(g.node.Gc!==h?(f.clusters.push(new ps(a,g.node,g.depth,c-1)),g=null):e++);g||(h>=a.Cv?(g={node:b,depth:c},e=c):xs(a,b,e+1,f));if(b.hb&&d--)for(c++,h=0;4>h;h++)if(k=b[h])ws(a,k,c,d,e,f,g),g=null;g&&f.clusters.push(new ps(a,g.node,g.depth,a.fg+a.hh))}function xs(a,b,c,d){b=b.entries;var e;if(b){var f=b.length;d=d.noisePoints;for(e=0;e<f;e++)d.push(new os(a,b[e],c))}else for(e=0;4>e;e++)(f=a[e])&&xs(a,f,c,d)}\nm.disposeInternal=function(){vs.g.disposeInternal.call(this);this.vr=null};vs.prototype.disposeInternal=vs.prototype.disposeInternal;function ys(a){this.oa=a;this.wy=11;a=document.createElement(\"canvas\");var b=a.getContext(\"2d\"),c=this.oa,d=14*c;a.width=d;a.height=d;b.scale(c,c);b.beginPath();b.strokeStyle=\"#FFFFFF\";b.fillStyle=\"#1080DD\";b.arc(7,7,6,0,2*Math.PI,!1);b.fill();b.lineWidth=1;b.stroke();this.UB=new Si(a,{size:{w:14,h:14},anchor:{x:7,y:7}});this.ot={};this.pt={}}t(\"H.clustering.theme.Circular\",ys);\nfunction zs(a,b,c){var d,e=document.createElement(\"canvas\"),f=e.getContext(\"2d\",{willReadFrequently:!0});var g=a.oa;var h=b*g;e.width=h;e.height=h;f.scale(g,g);g=b+\":\"+c;(d=a.ot[g])?f.putImageData(d,0,0):(b/=2,f.beginPath(),f.strokeStyle=\"rgba(\"+c+\",0.2)\",f.fillStyle=\"rgba(\"+c+\",1)\",f.arc(b,b,b/5*3,0,2*Math.PI,!1),f.fill(),f.lineWidth=b/5*4,f.stroke(),a.ot[g]=f.getImageData(0,0,h,h));return e}\nys.prototype.Gz=function(a){var b=a.Xd();var c=this.pt[b];if(!c){if(10>b){c=zs(this,28,\"118,209,0\");var d={x:11,y:18}}else 25>b?(c=zs(this,38,\"255,105,0\"),d={x:13,y:23}):50>b?(c=zs(this,38,\"240,60,0\"),d={x:13,y:23}):100>b?(c=zs(this,38,\"181,0,21\"),d={x:13,y:23}):1E3>b?(c=zs(this,48,\"181,0,21\"),d={x:15,y:28}):(c=zs(this,66,\"181,0,21\"),d={x:20,y:38});var e=c.getContext(\"2d\");e.fillStyle=\"#FFFFFF\";e.font=\"bold \"+this.wy+\"px Arial\";e.fillText(String(b),d.x,d.y);d=c.width/this.oa;c=new Si(c,{size:{w:d,\nh:d},anchor:{x:d/2,y:d/2}});this.pt[b]=c}b=new Vi(a.ya(),{icon:c,min:a.Td(),max:a.om()});b.setData(a);return b};ys.prototype.getClusterPresentation=ys.prototype.Gz;ys.prototype.qA=function(a){var b=new Vi(a.ya(),{icon:this.UB,min:a.Td()});b.setData(a);return b};ys.prototype.getNoisePresentation=ys.prototype.qA;function As(a,b){b=b||{};var c={},d=b.min||0,e=zb(d,b.max||22);d={min:d,max:e};As.g.constructor.call(this,d);this.oa=b.pixelRatio||de();Qa(c,hs,d,b.clusteringOptions||{});c.minWeight=zb(hs.minWeight,c.minWeight);switch(c.strategy){case Bs.DYNAMICGRID:if(c.projection!==Ci)throw new C(As,1,\"Unsupported projection\");this.qa=new ls(c);break;case Bs.GRID:this.qa=new ks(c);break;default:this.qa=new vs(c)}this.qa.ve(a);this.fl=b.theme||new ys(this.oa);this.No=z(this.No,this);this.hg=z(this.hg,this);Cs(this)}\nu(As,J);t(\"H.clustering.Provider\",As);As.prototype.disposeInternal=function(){As.g.disposeInternal.call(this);this.Bg.ia();this.qa.l();delete this.qa;delete this.Qm;delete this.fl;globalThis.clearTimeout(this.hp)};var Bs={FASTGRID:0,GRID:1,DYNAMICGRID:2};As.Strategy=Bs;As.prototype.ky=150;As.prototype.No=function(){this.dispatchEvent(\"start\");this.qa.es(this.hg,re)};function Cs(a,b,c){a.hp&&globalThis.clearTimeout(a.hp);b&&a.qa.Vw(b,c);a.hp=globalThis.setTimeout(a.No,a.ky)}\nAs.prototype.hg=function(a){this.Qm=a;Ds(this);this.dispatchEvent(\"end\")};As.prototype.ve=function(a){this.qa.ve(a);Cs(this)};As.prototype.setDataPoints=As.prototype.ve;As.prototype.zc=function(a){this.qa.zc(a);Cs(this)};As.prototype.addDataPoint=As.prototype.zc;As.prototype.Al=function(a){this.qa.Al(a);Cs(this)};As.prototype.addDataPoints=As.prototype.Al;As.prototype.Dk=function(a){this.qa.Dk(a);Cs(this)};As.prototype.removeDataPoint=As.prototype.Dk;As.prototype.MA=function(){return this.fl};\nAs.prototype.getTheme=As.prototype.MA;As.prototype.hD=function(a){this.fl=a;this.Qm&&(this.Bg.ia(),Ds(this))};As.prototype.setTheme=As.prototype.hD;function Ds(a){var b=a.Qm.clusters,c=a.Qm.noisePoints,d=b.length,e=c.length,f=0<d+e;for(a.Bg.ia();e--;){var g=c[e];a.Bg.Y(a.fl.getNoisePresentation(g))}for(;d--;)c=b[d],a.Bg.Y(a.fl.getClusterPresentation(c));f&&a.jb()}As.prototype.Vc=function(){return!0};As.prototype.providesDomMarkers=As.prototype.Vc;As.prototype.Wc=function(){return!0};\nAs.prototype.providesMarkers=As.prototype.Wc;As.prototype.ne=function(){return!0};As.prototype.providesSpatials=As.prototype.ne;As.prototype.xk=function(a,b){Cs(this,a,b)};As.prototype.preprocessData=As.prototype.xk;t(\"H.clustering.buildInfo\",function(){return jj(\"H-clustering\",\"1.61.3\",\"14eda3c\",{region:\"row\"})});\n");